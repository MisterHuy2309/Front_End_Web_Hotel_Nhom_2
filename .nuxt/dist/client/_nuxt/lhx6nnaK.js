import{f as Y,r as u,g as Z,l as f,c as l,b as d,a as t,w as C,m as T,F as p,j as m,p as _,v as w,q as tt,n as b,h as et,i as k,o as s,d as M,t as i}from"./GwSKdg7n.js";import{a as P}from"./EN5EgJKL.js";import{_ as nt}from"./DlAUqK2U.js";const at={class:"main-content"},lt={key:0,class:"tab-content"},st={class:"table-wrapper"},ot={class:"custom-table"},it=["onClick"],ut={class:"pagination"},rt=["onClick"],ct={key:1,class:"modal"},dt={class:"modal-content"},vt={key:2,class:"tab-content"},ht={class:"table-wrapper"},gt={class:"custom-table"},pt=["onClick"],mt={class:"pagination"},bt=["onClick"],kt={key:3,class:"modal"},yt={class:"modal-content"},D=5,x=5,St={__name:"letan",setup(Vt){const L=Y();L.initializeDarkMode();const y=u("phong"),h=u([]),g=u([]),S=u(0),V=u(0),I=u(!1),N=u(!1),r=u(null),c=u(null),G=[{key:"khachhang",title:"Khách hàng",icon:"person"},{key:"phong",title:"Phòng",icon:"hotel"},{key:"dichvu",title:"Dịch vụ",icon:"shopping_cart"},{key:"caidat",title:"Cài đặt",icon:"settings"}];Z(async()=>{try{const a=await P.get("/PhongWithTienNghi");h.value=a.data.map(o=>({...o,tienNghiList:JSON.parse(o.tienNghi)}));const e=await P.get("/dichvu");g.value=e.data}catch(a){console.error("Lỗi khi lấy dữ liệu:",a)}});const B=f(()=>{const a=S.value*D;return h.value.slice(a,a+D)}),H=f(()=>Math.ceil(h.value.length/D)),R=f(()=>{const a=V.value*x;return g.value.slice(a,a+x)}),U=f(()=>Math.ceil(g.value.length/x)),j=a=>{r.value={...a},I.value=!0},E=()=>{I.value=!1,r.value=null},z=async()=>{try{const a=r.value;await P.put(`/Phong/${a.maPhong}`,a);const e=h.value.findIndex(o=>o.maPhong===a.maPhong);e!==-1&&(h.value[e]={...a}),E()}catch(a){console.error("Lỗi khi cập nhật phòng:",a)}},F=a=>{c.value={...a},N.value=!0},$=()=>{N.value=!1,c.value=null},K=async()=>{try{const a=c.value;await P.put(`/DichVu/${a.maDichVu}`,a);const e=g.value.findIndex(o=>o.maDichVu===a.maDichVu);e!==-1&&(g.value[e]={...a}),$()}catch(a){console.error("Lỗi khi cập nhật dịch vụ:",a)}},Q=a=>{switch(a){case"1":return"Còn Trống";case"2":return"Đã Đặt";case"3":return"Đang Sử Dụng";case"4":return"Đang Vệ Sinh";default:return"Không xác định"}},q=a=>{switch(a){case"1":return"status-available";case"2":return"status-booked";case"3":return"status-in-use";case"4":return"status-cleaning";default:return""}};return(a,e)=>{const o=k("VaIcon"),J=k("VaSidebarItemTitle"),O=k("VaSidebarItemContent"),W=k("VaSidebarItem"),A=k("VaSidebar");return s(),l("div",{class:b(["letan-page",{"dark-mode":et(L).isDarkMode}])},[d(A,{color:"primary",class:"sidebar"},{default:C(()=>[(s(),l(p,null,m(G,n=>d(W,{key:n.key,onClick:v=>y.value=n.key,class:b({active:y.value===n.key})},{default:C(()=>[d(O,null,{default:C(()=>[d(o,{name:n.icon},null,8,["name"]),d(J,null,{default:C(()=>[M(i(n.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","class"])),64))]),_:1}),t("div",at,[e[19]||(e[19]=t("h1",{class:"page-title"},"Trang Lễ Tân",-1)),y.value==="phong"?(s(),l("div",lt,[e[6]||(e[6]=t("h2",{class:"section-title"},"Quản lý phòng",-1)),e[7]||(e[7]=t("p",{class:"section-description"},"Danh sách phòng, tình trạng phòng, và đặt phòng.",-1)),t("div",st,[t("table",ot,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Tên phòng"),t("th",null,"Tiện nghi"),t("th",null,"Trạng thái"),t("th",null,"Hành động")])],-1)),t("tbody",null,[(s(!0),l(p,null,m(B.value,(n,v)=>(s(),l("tr",{key:n.maPhong},[t("td",null,i(S.value*D+v+1),1),t("td",null,i(n.loaiPhong),1),t("td",null,i(n.tienNghiList.join(", ")),1),t("td",null,[t("span",{class:b(q(n.tinhTrang))},i(Q(n.tinhTrang)),3)]),t("td",null,[t("button",{class:"btn-edit",onClick:X=>j(n)},[d(o,{name:"edit"}),e[4]||(e[4]=M(" Sửa "))],8,it)])]))),128))])])]),t("div",ut,[(s(!0),l(p,null,m(H.value,n=>(s(),l("button",{key:n,class:b({active:S.value===n-1}),onClick:v=>S.value=n-1},i(n),11,rt))),128))])])):T("",!0),I.value?(s(),l("div",ct,[t("div",dt,[e[9]||(e[9]=t("h3",null,"Sửa thông tin phòng",-1)),e[10]||(e[10]=t("label",{for:"roomName"},"Tên phòng:",-1)),_(t("input",{id:"roomName",type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>r.value.loaiPhong=n)},null,512),[[w,r.value.loaiPhong]]),e[11]||(e[11]=t("label",{for:"roomStatus"},"Trạng thái:",-1)),_(t("select",{id:"roomStatus","onUpdate:modelValue":e[1]||(e[1]=n=>r.value.tinhTrang=n)},e[8]||(e[8]=[t("option",{value:"1"},"Còn Trống",-1),t("option",{value:"2"},"Đã Đặt",-1),t("option",{value:"3"},"Đang Sử Dụng",-1),t("option",{value:"4"},"Đang Vệ Sinh",-1)]),512),[[tt,r.value.tinhTrang]]),t("div",{class:"modal-actions"},[t("button",{class:"btn-primary",onClick:z},"Lưu"),t("button",{class:"btn-secondary",onClick:E},"Hủy")])])])):T("",!0),y.value==="dichvu"?(s(),l("div",vt,[e[14]||(e[14]=t("h2",{class:"section-title"},"Quản lý dịch vụ",-1)),e[15]||(e[15]=t("p",{class:"section-description"},"Danh sách dịch vụ và giá cả.",-1)),t("div",ht,[t("table",gt,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Tên dịch vụ"),t("th",null,"Giá"),t("th",null,"Hành động")])],-1)),t("tbody",null,[(s(!0),l(p,null,m(R.value,(n,v)=>(s(),l("tr",{key:n.maDichVu},[t("td",null,i(V.value*x+v+1),1),t("td",null,i(n.tenDichVu),1),t("td",null,i(n.donGia.toLocaleString())+" VND",1),t("td",null,[t("button",{class:"btn-edit",onClick:X=>F(n)},[d(o,{name:"edit"}),e[12]||(e[12]=M(" Sửa "))],8,pt)])]))),128))])])]),t("div",mt,[(s(!0),l(p,null,m(U.value,n=>(s(),l("button",{key:n,class:b({active:V.value===n-1}),onClick:v=>V.value=n-1},i(n),11,bt))),128))])])):T("",!0),N.value?(s(),l("div",kt,[t("div",yt,[e[16]||(e[16]=t("h3",null,"Sửa thông tin dịch vụ",-1)),e[17]||(e[17]=t("label",{for:"serviceName"},"Tên dịch vụ:",-1)),_(t("input",{id:"serviceName",type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>c.value.tenDichVu=n)},null,512),[[w,c.value.tenDichVu]]),e[18]||(e[18]=t("label",{for:"servicePrice"},"Giá:",-1)),_(t("input",{id:"servicePrice",type:"number","onUpdate:modelValue":e[3]||(e[3]=n=>c.value.donGia=n)},null,512),[[w,c.value.donGia]]),t("div",{class:"modal-actions"},[t("button",{class:"btn-primary",onClick:K},"Lưu"),t("button",{class:"btn-secondary",onClick:$},"Hủy")])])])):T("",!0)])],2)}}},_t=nt(St,[["__scopeId","data-v-9074db44"]]);export{_t as default};
