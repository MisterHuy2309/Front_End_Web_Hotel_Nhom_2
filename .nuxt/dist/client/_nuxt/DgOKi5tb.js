import{r as h,g as m,M as p,c,a as s,F as v,j as _,p as k,v as f,N as w,o as l,n as y,t as x}from"./GwSKdg7n.js";import{_ as R}from"./DlAUqK2U.js";import{H as S}from"./Dd-WNJ37.js";const b={class:"chat-container"},M={class:"chat-box"},T={class:"messages"},C={class:"chat-input"},K="KH001",u="QT001",A={__name:"KhachHangChat",setup(B){const i=h([]),o=h("");let e=null;const d=async()=>{e=new S().withUrl("http://nhom2webkhachsan.runasp.net/chathub").withAutomaticReconnect().build(),e.on("ReceiveMessage",(n,t)=>{console.log("Tin nháº¯n nháº­n Ä‘Æ°á»£c tá»«:",n,"Ná»™i dung:",t),n===u&&i.value.push({text:t,isAdmin:!0})});try{await e.start(),console.log("SignalR Ä‘Ã£ káº¿t ná»‘i")}catch(n){console.error("Lá»—i khi káº¿t ná»‘i SignalR:",n)}},r=async()=>{if(!o.value.trim())return;const n=o.value.trim();i.value.push({text:n,isAdmin:!1}),console.log("Tin nháº¯n gá»­i Ä‘i:",n);try{await e.invoke("SendMessageToAdmin",K,n),console.log(`Tin nháº¯n Ä‘Ã£ gá»­i Ä‘áº¿n quáº£n trá»‹ viÃªn ${u}:`,n),o.value=""}catch(t){console.error("Lá»—i khi gá»­i tin nháº¯n:",t)}};return m(async()=>{console.log("Khá»Ÿi táº¡o SignalR..."),await d()}),p(()=>{e&&e.stop().then(()=>console.log("SignalR Ä‘Ã£ ngáº¯t káº¿t ná»‘i")).catch(n=>console.error("Lá»—i khi ngáº¯t káº¿t ná»‘i SignalR:",n))}),(n,t)=>(l(),c("div",b,[t[1]||(t[1]=s("h1",null,"ðŸ’¬ Chat vá»›i Quáº£n Trá»‹ ViÃªn",-1)),s("div",M,[s("div",T,[(l(!0),c(v,null,_(i.value,(a,g)=>(l(),c("div",{key:g,class:y(a.isAdmin?"admin-message":"customer-message")},x(a.text),3))),128))]),s("div",C,[k(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),placeholder:"Nháº­p tin nháº¯n...",onKeyup:w(r,["enter"])},null,544),[[f,o.value]]),s("button",{onClick:r},"Gá»­i")])])]))}},I=R(A,[["__scopeId","data-v-d5b37e4d"]]);export{I as default};
