{"version":3,"file":"letan.vue.mjs","sources":["../../../../pages/letan.vue"],"sourcesContent":["<template>\r\n  <div :class=\"['letan-page', { 'dark-mode': theme.isDarkMode }]\">\r\n    <!-- Sidebar -->\r\n    <VaSidebar color=\"primary\" class=\"sidebar\">\r\n      <VaSidebarItem\r\n        v-for=\"item in sidebarItems\"\r\n        :key=\"item.key\"\r\n        @click=\"currentTab = item.key\"\r\n        :class=\"{ active: currentTab === item.key }\"\r\n      >\r\n        <VaSidebarItemContent>\r\n          <VaIcon :name=\"item.icon\" />\r\n          <VaSidebarItemTitle>{{ item.title }}</VaSidebarItemTitle>\r\n        </VaSidebarItemContent>\r\n      </VaSidebarItem>\r\n    </VaSidebar>\r\n\r\n    <!-- Main content -->\r\n    <div class=\"main-content\">\r\n      <h1 class=\"page-title\">Trang Lễ Tân</h1>\r\n\r\n      <!-- Quản lý phòng -->\r\n      <div v-if=\"currentTab === 'phong'\" class=\"tab-content\">\r\n        <h2 class=\"section-title\">Quản lý phòng</h2>\r\n        <p class=\"section-description\">Danh sách phòng, tình trạng phòng, và đặt phòng.</p>\r\n\r\n        <!-- Table -->\r\n        <div class=\"table-wrapper\">\r\n          <table class=\"custom-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Tên phòng</th>\r\n                <th>Tiện nghi</th>\r\n                <th>Trạng thái</th>\r\n                <th>Hành động</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                v-for=\"(room, index) in paginatedRooms\"\r\n                :key=\"room.maPhong\"\r\n              >\r\n                <td>{{ currentPage * itemsPerPage + index + 1 }}</td>\r\n                <td>{{ room.loaiPhong }}</td>\r\n                <td>{{ room.tienNghiList.join(', ') }}</td>\r\n                <td>\r\n                  <span :class=\"getStatusClass(room.tinhTrang)\">\r\n                    {{ getStatusText(room.tinhTrang) }}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    class=\"btn-edit\"\r\n                    @click=\"openEditModal(room)\"\r\n                  >\r\n                    <VaIcon name=\"edit\" /> Sửa\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Pagination -->\r\n        <div class=\"pagination\">\r\n          <button\r\n            v-for=\"page in totalPages\"\r\n            :key=\"page\"\r\n            :class=\"{ active: currentPage === page - 1 }\"\r\n            @click=\"currentPage = page - 1\"\r\n          >\r\n            {{ page }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Modal sửa -->\r\n      <div v-if=\"showEditModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h3>Sửa thông tin phòng</h3>\r\n          <label for=\"roomName\">Tên phòng:</label>\r\n          <input\r\n            id=\"roomName\"\r\n            type=\"text\"\r\n            v-model=\"editingRoom.loaiPhong\"\r\n          />\r\n\r\n          <label for=\"roomStatus\">Trạng thái:</label>\r\n          <select\r\n            id=\"roomStatus\"\r\n            v-model=\"editingRoom.tinhTrang\"\r\n          >\r\n            <option value=\"1\">Còn Trống</option>\r\n            <option value=\"2\">Đã Đặt</option>\r\n            <option value=\"3\">Đang Sử Dụng</option>\r\n            <option value=\"4\">Đang Vệ Sinh</option>\r\n          </select>\r\n\r\n          <div class=\"modal-actions\">\r\n            <button class=\"btn-primary\" @click=\"saveChanges\">Lưu</button>\r\n            <button class=\"btn-secondary\" @click=\"closeEditModal\">Hủy</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Quản lý dịch vụ -->\r\n      <div v-if=\"currentTab === 'dichvu'\" class=\"tab-content\">\r\n        <h2 class=\"section-title\">Quản lý dịch vụ</h2>\r\n        <p class=\"section-description\">Danh sách dịch vụ và giá cả.</p>\r\n\r\n        <!-- Table -->\r\n        <div class=\"table-wrapper\">\r\n          <table class=\"custom-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Tên dịch vụ</th>\r\n                <th>Giá</th>\r\n                <th>Hành động</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                v-for=\"(service, index) in paginatedServices\"\r\n                :key=\"service.maDichVu\"\r\n              >\r\n                <td>{{ currentPageService * itemsPerPageService + index + 1 }}</td>\r\n                <td>{{ service.tenDichVu }}</td>\r\n                <td>{{ service.donGia.toLocaleString() }} VND</td>\r\n                <td>\r\n                  <button\r\n                    class=\"btn-edit\"\r\n                    @click=\"openEditServiceModal(service)\"\r\n                  >\r\n                    <VaIcon name=\"edit\" /> Sửa\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Pagination -->\r\n        <div class=\"pagination\">\r\n          <button\r\n            v-for=\"page in totalPagesService\"\r\n            :key=\"page\"\r\n            :class=\"{ active: currentPageService === page - 1 }\"\r\n            @click=\"currentPageService = page - 1\"\r\n          >\r\n            {{ page }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Modal sửa dịch vụ -->\r\n      <div v-if=\"showEditServiceModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h3>Sửa thông tin dịch vụ</h3>\r\n          <label for=\"serviceName\">Tên dịch vụ:</label>\r\n          <input\r\n            id=\"serviceName\"\r\n            type=\"text\"\r\n            v-model=\"editingService.tenDichVu\"\r\n          />\r\n\r\n          <label for=\"servicePrice\">Giá:</label>\r\n          <input\r\n            id=\"servicePrice\"\r\n            type=\"number\"\r\n            v-model=\"editingService.donGia\"\r\n          />\r\n\r\n          <div class=\"modal-actions\">\r\n            <button class=\"btn-primary\" @click=\"saveServiceChanges\">Lưu</button>\r\n            <button class=\"btn-secondary\" @click=\"closeEditServiceModal\">Hủy</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useThemeStore } from '@/store/DarkMode';\r\nimport { axiosBase } from '~/utils/axiosBase'; // Import axiosBase\r\n\r\n// States\r\nconst theme = useThemeStore();\r\ntheme.initializeDarkMode();\r\n\r\nconst currentTab = ref('phong'); // Tab mặc định\r\nconst rooms = ref([]);\r\nconst services = ref([]);\r\nconst currentPage = ref(0); // Trang hiện tại cho phòng\r\nconst currentPageService = ref(0); // Trang hiện tại cho dịch vụ\r\nconst itemsPerPage = 5; // Số lượng phòng trên mỗi trang\r\nconst itemsPerPageService = 5; // Số lượng dịch vụ trên mỗi trang\r\nconst showEditModal = ref(false);\r\nconst showEditServiceModal = ref(false);\r\nconst editingRoom = ref(null);\r\nconst editingService = ref(null);\r\n\r\n// Sidebar items\r\nconst sidebarItems = [\r\n  { key: 'khachhang', title: 'Khách hàng', icon: 'person' },\r\n  { key: 'phong', title: 'Phòng', icon: 'hotel' },\r\n  { key: 'dichvu', title: 'Dịch vụ', icon: 'shopping_cart' },\r\n  { key: 'caidat', title: 'Cài đặt', icon: 'settings' },\r\n];\r\n\r\n// Lấy danh sách phòng\r\nonMounted(async () => {\r\n  try {\r\n    const responseRooms = await axiosBase.get('/PhongWithTienNghi');\r\n    rooms.value = responseRooms.data.map((room) => ({\r\n      ...room,\r\n      tienNghiList: JSON.parse(room.tienNghi), // Chuyển đổi chuỗi JSON thành mảng\r\n    }));\r\n\r\n    const responseServices = await axiosBase.get('/dichvu');\r\n    services.value = responseServices.data;\r\n  } catch (error) {\r\n    console.error('Lỗi khi lấy dữ liệu:', error);\r\n  }\r\n});\r\n\r\n// Pagination logic cho phòng\r\nconst paginatedRooms = computed(() => {\r\n  const start = currentPage.value * itemsPerPage;\r\n  return rooms.value.slice(start, start + itemsPerPage);\r\n});\r\nconst totalPages = computed(() => Math.ceil(rooms.value.length / itemsPerPage));\r\n\r\n// Pagination logic cho dịch vụ\r\nconst paginatedServices = computed(() => {\r\n  const start = currentPageService.value * itemsPerPageService;\r\n  return services.value.slice(start, start + itemsPerPageService);\r\n});\r\nconst totalPagesService = computed(() =>\r\n  Math.ceil(services.value.length / itemsPerPageService)\r\n);\r\n\r\n// Modal logic cho phòng\r\nconst openEditModal = (room) => {\r\n  editingRoom.value = { ...room }; // Tạo bản sao để chỉnh sửa\r\n  showEditModal.value = true;\r\n};\r\n\r\nconst closeEditModal = () => {\r\n  showEditModal.value = false;\r\n  editingRoom.value = null;\r\n};\r\n\r\n// Lưu thay đổi phòng\r\nconst saveChanges = async () => {\r\n  try {\r\n    const updatedRoom = editingRoom.value;\r\n    await axiosBase.put(`/Phong/${updatedRoom.maPhong}`, updatedRoom);\r\n    // Cập nhật danh sách phòng\r\n    const roomIndex = rooms.value.findIndex(\r\n      (room) => room.maPhong === updatedRoom.maPhong\r\n    );\r\n    if (roomIndex !== -1) {\r\n      rooms.value[roomIndex] = { ...updatedRoom };\r\n    }\r\n    closeEditModal();\r\n  } catch (error) {\r\n    console.error('Lỗi khi cập nhật phòng:', error);\r\n  }\r\n};\r\n\r\n// Modal logic cho dịch vụ\r\nconst openEditServiceModal = (service) => {\r\n  editingService.value = { ...service }; // Tạo bản sao để chỉnh sửa\r\n  showEditServiceModal.value = true;\r\n};\r\n\r\nconst closeEditServiceModal = () => {\r\n  showEditServiceModal.value = false;\r\n  editingService.value = null;\r\n};\r\n\r\n// Lưu thay đổi dịch vụ\r\nconst saveServiceChanges = async () => {\r\n  try {\r\n    const updatedService = editingService.value;\r\n    await axiosBase.put(`/DichVu/${updatedService.maDichVu}`, updatedService);\r\n    // Cập nhật danh sách dịch vụ\r\n    const serviceIndex = services.value.findIndex(\r\n      (service) => service.maDichVu === updatedService.maDichVu\r\n    );\r\n    if (serviceIndex !== -1) {\r\n      services.value[serviceIndex] = { ...updatedService };\r\n    }\r\n    closeEditServiceModal();\r\n  } catch (error) {\r\n    console.error('Lỗi khi cập nhật dịch vụ:', error);\r\n  }\r\n};\r\n\r\n// Helpers\r\nconst getStatusText = (status) => {\r\n  switch (status) {\r\n    case '1':\r\n      return 'Còn Trống';\r\n    case '2':\r\n      return 'Đã Đặt';\r\n    case '3':\r\n      return 'Đang Sử Dụng';\r\n    case '4':\r\n      return 'Đang Vệ Sinh';\r\n    default:\r\n      return 'Không xác định';\r\n  }\r\n};\r\n\r\nconst getStatusClass = (status) => {\r\n  switch (status) {\r\n    case '1':\r\n      return 'status-available';\r\n    case '2':\r\n      return 'status-booked';\r\n    case '3':\r\n      return 'status-in-use';\r\n    case '4':\r\n      return 'status-cleaning';\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Layout styles */\r\n.letan-page {\r\n  display: flex;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.letan-page.dark-mode {\r\n  background-color: #2c3e50;\r\n  color: #f0f0f0;\r\n}\r\n\r\n.sidebar {\r\n  width: 250px;\r\n  background-color: #2c3e50;\r\n  color: white;\r\n}\r\n\r\n.sidebar .va-sidebar-item.active {\r\n  background-color: #1abc9c;\r\n  color: white;\r\n}\r\n\r\n/* Main content */\r\n.main-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.page-title {\r\n  font-size: 2rem;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n.letan-page.dark-mode .page-title {\r\n  color: #f0f0f0;\r\n}\r\n\r\n/* Table styles */\r\n.table-wrapper {\r\n  overflow-x: auto;\r\n}\r\n\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 10px;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #f4f4f4;\r\n}\r\n\r\n.letan-page.dark-mode .custom-table th {\r\n  background-color: #34495e;\r\n  color: #f0f0f0;\r\n}\r\n\r\n.custom-table tr:nth-child(even) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.letan-page.dark-mode .custom-table tr:nth-child(even) {\r\n  background-color: #3b4a5a;\r\n}\r\n\r\n/* Status styles */\r\n.status-available {\r\n  color: green;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-booked {\r\n  color: red;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-in-use {\r\n  color: orange;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-cleaning {\r\n  color: blue;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n"],"names":[],"mappings":";;;;;;AAsMA,MAAM,eAAe;AACrB,MAAM,sBAAsB;;;;;AAT5B,UAAM,QAAQ,cAAa;AAC3B,UAAM,mBAAkB;AAExB,UAAM,aAAa,IAAI,OAAO;AAC9B,UAAM,QAAQ,IAAI,CAAA,CAAE;AACpB,UAAM,WAAW,IAAI,CAAA,CAAE;AACvB,UAAM,cAAc,IAAI,CAAC;AACzB,UAAM,qBAAqB,IAAI,CAAC;AAGhC,UAAM,gBAAgB,IAAI,KAAK;AAC/B,UAAM,uBAAuB,IAAI,KAAK;AACtC,UAAM,cAAc,IAAI,IAAI;AAC5B,UAAM,iBAAiB,IAAI,IAAI;AAG/B,UAAM,eAAe;AAAA,MACnB,EAAE,KAAK,aAAa,OAAO,cAAc,MAAM,SAAU;AAAA,MACzD,EAAE,KAAK,SAAS,OAAO,SAAS,MAAM,QAAS;AAAA,MAC/C,EAAE,KAAK,UAAU,OAAO,WAAW,MAAM,gBAAiB;AAAA,MAC1D,EAAE,KAAK,UAAU,OAAO,WAAW,MAAM,WAAY;AAAA,IACvD;AAmBA,UAAM,iBAAiB,SAAS,MAAM;AACpC,YAAM,QAAQ,YAAY,QAAQ;AAClC,aAAO,MAAM,MAAM,MAAM,OAAO,QAAQ,YAAY;AAAA,IACtD,CAAC;AACD,UAAM,aAAa,SAAS,MAAM,KAAK,KAAK,MAAM,MAAM,SAAS,YAAY,CAAC;AAG9E,UAAM,oBAAoB,SAAS,MAAM;AACvC,YAAM,QAAQ,mBAAmB,QAAQ;AACzC,aAAO,SAAS,MAAM,MAAM,OAAO,QAAQ,mBAAmB;AAAA,IAChE,CAAC;AACD,UAAM,oBAAoB;AAAA,MAAS,MACjC,KAAK,KAAK,SAAS,MAAM,SAAS,mBAAmB;AAAA,IACvD;AA6DA,UAAM,gBAAgB,CAAC,WAAW;AAChC,cAAQ,QAAM;AAAA,QACZ,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT;AACE,iBAAO;AAAA,MACV;AAAA,IACH;AAEA,UAAM,iBAAiB,CAAC,WAAW;AACjC,cAAQ,QAAM;AAAA,QACZ,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT,KAAK;AACH,iBAAO;AAAA,QACT;AACE,iBAAO;AAAA,MACV;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}