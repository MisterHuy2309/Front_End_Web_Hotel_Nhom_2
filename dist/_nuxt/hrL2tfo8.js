import{f as F,r as c,l as H,g as K,m as V,c as s,b as i,a as t,w as p,p as P,F as _,j as S,q as x,v as U,s as q,n as v,h as A,i as d,o,d as I,t as r}from"./BYeJzb1c.js";import{_ as J}from"./DlAUqK2U.js";const O={class:"main-content"},Q={key:0,class:"tab-content"},W={class:"table-wrapper"},G={class:"custom-table"},X=["onClick"],Y={class:"pagination"},Z=["onClick"],tt={key:1,class:"modal"},nt={class:"modal-content"},m=5,et={__name:"letan",setup(at){const f=F();f.initializeDarkMode();const k=c("phong"),u=c([]),h=c(0),b=c(!1),l=c(null),N=[{key:"khachhang",title:"Khách hàng",icon:"person"},{key:"phong",title:"Phòng",icon:"hotel"},{key:"dichvu",title:"Dịch vụ",icon:"shopping_cart"},{key:"caidat",title:"Cài đặt",icon:"settings"}],{$api:T}=H();K(async()=>{try{const a=await T.get("/PhongWithTienNghi");u.value=a.data.map(n=>({...n,tienNghiList:JSON.parse(n.tienNghi)}))}catch(a){console.error("Lỗi khi lấy dữ liệu phòng:",a)}});const w=V(()=>{const a=h.value*m;return u.value.slice(a,a+m)}),M=V(()=>Math.ceil(u.value.length/m)),D=a=>{l.value={...a},b.value=!0},C=()=>{b.value=!1,l.value=null},L=async()=>{try{const a=l.value;await T.put(`/Phong/${a.maPhong}`,a);const n=u.value.findIndex(g=>g.maPhong===a.maPhong);n!==-1&&(u.value[n]={...a}),C()}catch(a){console.error("Lỗi khi cập nhật phòng:",a)}},$=a=>{switch(a){case"1":return"Còn Trống";case"2":return"Đã Đặt";case"3":return"Đang Sử Dụng";case"4":return"Đang Vệ Sinh";default:return"Không xác định"}},E=a=>{switch(a){case"1":return"status-available";case"2":return"status-booked";case"3":return"status-in-use";case"4":return"status-cleaning";default:return""}};return(a,n)=>{const g=d("VaIcon"),B=d("VaSidebarItemTitle"),R=d("VaSidebarItemContent"),j=d("VaSidebarItem"),z=d("VaSidebar");return o(),s("div",{class:v(["letan-page",{"dark-mode":A(f).isDarkMode}])},[i(z,{color:"primary",class:"sidebar"},{default:p(()=>[(o(),s(_,null,S(N,e=>i(j,{key:e.key,onClick:y=>k.value=e.key,class:v({active:k.value===e.key})},{default:p(()=>[i(R,null,{default:p(()=>[i(g,{name:e.icon},null,8,["name"]),i(B,null,{default:p(()=>[I(r(e.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","class"])),64))]),_:1}),t("div",O,[n[10]||(n[10]=t("h1",{class:"page-title"},"Trang Lễ Tân",-1)),k.value==="phong"?(o(),s("div",Q,[n[4]||(n[4]=t("h2",{class:"section-title"},"Quản lý phòng",-1)),n[5]||(n[5]=t("p",{class:"section-description"},"Danh sách phòng, tình trạng phòng, và đặt phòng.",-1)),t("div",W,[t("table",G,[n[3]||(n[3]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Tên phòng"),t("th",null,"Tiện nghi"),t("th",null,"Trạng thái"),t("th",null,"Hành động")])],-1)),t("tbody",null,[(o(!0),s(_,null,S(w.value,(e,y)=>(o(),s("tr",{key:e.maPhong},[t("td",null,r(h.value*m+y+1),1),t("td",null,r(e.loaiPhong),1),t("td",null,r(e.tienNghiList.join(", ")),1),t("td",null,[t("span",{class:v(E(e.tinhTrang))},r($(e.tinhTrang)),3)]),t("td",null,[t("button",{class:"btn-edit",onClick:st=>D(e)},[i(g,{name:"edit"}),n[2]||(n[2]=I(" Sửa "))],8,X)])]))),128))])])]),t("div",Y,[(o(!0),s(_,null,S(M.value,e=>(o(),s("button",{key:e,class:v({active:h.value===e-1}),onClick:y=>h.value=e-1},r(e),11,Z))),128))])])):P("",!0),b.value?(o(),s("div",tt,[t("div",nt,[n[7]||(n[7]=t("h3",null,"Sửa thông tin phòng",-1)),n[8]||(n[8]=t("label",{for:"roomName"},"Tên phòng:",-1)),x(t("input",{id:"roomName",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>l.value.loaiPhong=e)},null,512),[[U,l.value.loaiPhong]]),n[9]||(n[9]=t("label",{for:"roomStatus"},"Trạng thái:",-1)),x(t("select",{id:"roomStatus","onUpdate:modelValue":n[1]||(n[1]=e=>l.value.tinhTrang=e)},n[6]||(n[6]=[t("option",{value:"1"},"Còn Trống",-1),t("option",{value:"2"},"Đã Đặt",-1),t("option",{value:"3"},"Đang Sử Dụng",-1),t("option",{value:"4"},"Đang Vệ Sinh",-1)]),512),[[q,l.value.tinhTrang]]),t("div",{class:"modal-actions"},[t("button",{class:"btn-primary",onClick:L},"Lưu"),t("button",{class:"btn-secondary",onClick:C},"Hủy")])])])):P("",!0)])],2)}}},it=J(et,[["__scopeId","data-v-3fddae5d"]]);export{it as default};
