import{_ as P}from"./DOkrFvzk.js";import{i as v,j as C,J as R,l as b,c as f,o as i,a as e,b as k,K as T,w as d,m as N,L as U,T as A,h as O,M as j,f as q,d as m,q as M,F as z,r as F,t as g,g as L,s as V,k as K}from"./D8Oq5PXF.js";import{u as Q}from"./Bsxie3s2.js";import{_ as S}from"./DlAUqK2U.js";const G={__name:"DropDown",props:{offset:{type:Number,default:0},placement:{type:String,default:"bottom-end"}},setup(D){const n=D,r=v(!1),l=v(null);function _(t){r.value=!r.value}function c(t){l.value&&!l.value.contains(t.target)&&(r.value=!1)}C(()=>{document.addEventListener("click",c)}),R(()=>{document.removeEventListener("click",c)});const a=b(()=>{let t=`margin-top:${n.offset}px;`;return n.placement.includes("top")?t=`bottom:100%;${n.placement.includes("end")?"right:0;":"left:0;"}margin-bottom:${n.offset}px;`:t+=n.placement.includes("end")?"right:0;":"left:0;",t});return(t,w)=>(i(),f("div",{class:"dropdown-wrapper",ref_key:"wrapper",ref:l},[e("div",{onClick:_},[T(t.$slots,"anchor",{},void 0,!0)]),k(A,{name:"fade"},{default:d(()=>[r.value?(i(),f("div",{key:0,class:"dropdown-content",style:U(a.value)},[T(t.$slots,"default",{},void 0,!0)],4)):N("",!0)]),_:3})],512))}},J=S(G,[["__scopeId","data-v-8d3eba3b"]]),W={class:"container"},X={class:"nav-list"},Y={class:"auth-section"},Z={class:"user-avatar"},ee=["src"],te={class:"username"},ae={class:"dropdown-item"},ne={class:"dropdown-item"},oe={class:"dropdown-item"},se={key:0,class:"header-underline"},le={__name:"Header",setup(D){const n=O(),r=[{title:"Trang chủ",link:"/"},{title:"Đặt phòng",link:"/Phong"},{title:"Dịch vụ",link:"/DichVu"},{title:"Nội quy",link:"/HotelRegulations"},{title:"Game",link:"/Trangchoigame"}],l=v(!1),_=Q(),c=b(()=>_.isLoggedIn()),a=v(null),t=b({get:()=>n.isDarkMode,set:u=>n.setDarkMode(u)}),w=v(null),H=()=>{l.value=!l.value},B=()=>{l.value=!1},$=()=>{_.logout(),a.value=null,window.location.href="/"},x=async()=>{try{const u=await K.get("/xacthuc/profile");a.value=u.data.profile}catch{a.value=null}};C(()=>{c.value&&x()}),j(c,u=>{u?x():a.value=null});function E(){n.toggleDarkMode(),w.value&&w.value.showToast(t.value?"Đã chuyển sang dark mode":"Đã chuyển lại light mode")}return(u,o)=>{const y=P,I=q("va-switch");return i(),f("header",{class:M(["header",{dark:V(n).isDarkMode}])},[e("div",W,[k(y,{class:"logo",to:"/"},{default:d(()=>o[1]||(o[1]=[m("🏨 OceanView")])),_:1,__:[1]}),e("button",{class:"menu-toggle",onClick:H}),e("nav",{class:M(["nav",{"nav-open":l.value}])},[e("ul",X,[(i(),f(z,null,F(r,s=>e("li",{key:s.title,class:"nav-item"},[k(y,{class:"nav-link",to:s.link,"active-class":"active","exact-active-class":"active",onClick:B},{default:d(()=>[m(g(s.title),1)]),_:2},1032,["to"])])),64))])],2),e("div",Y,[c.value?(i(),L(J,{key:0,placement:"bottom-end"},{anchor:d(()=>{var s,p,h;return[e("div",Z,[e("img",{src:(s=a.value)!=null&&s.HinhAnhURL&&a.value.HinhAnhURL!=="string"?a.value.HinhAnhURL:"https://i.pinimg.com/736x/cd/62/46/cd624642b71af4a1d73f69b1290c751a.jpg",alt:"Avatar",class:"avatar"},null,8,ee),e("span",te,g(((p=a.value)==null?void 0:p.HoTen)||((h=a.value)==null?void 0:h.TenTaiKhoan)||"Người dùng"),1)])]}),default:d(()=>{var s,p;return[e("div",ae,[o[2]||(o[2]=e("b",null,"📧 Email:",-1)),m(" "+g((s=a.value)==null?void 0:s.Email),1)]),e("div",ne,[o[3]||(o[3]=e("b",null,"🛡️ Vai trò:",-1)),m(" "+g((p=a.value)==null?void 0:p.Vaitro),1)]),e("div",oe,[k(I,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=h=>t.value=h),onChange:E,color:"primary",label:t.value?"🌙 Dark mode":"☀️ Light mode"},null,8,["modelValue","label"])]),e("div",{class:"dropdown-item"},[e("button",{class:"btn btn-outline",onClick:$},"Đăng xuất")])]}),_:1})):(i(),L(y,{key:1,to:"/DangNhapPhu",class:"btn btn-outline"},{default:d(()=>o[4]||(o[4]=[m("Đăng nhập")])),_:1,__:[4]}))])]),V(n).isDarkMode?N("",!0):(i(),f("div",se))],2)}}},de=S(le,[["__scopeId","data-v-17af181c"]]);export{de as T};
