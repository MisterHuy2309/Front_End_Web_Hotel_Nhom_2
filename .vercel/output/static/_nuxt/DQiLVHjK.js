import{_ as B}from"./CjmNyfYu.js";import{f as S,y as D,r as v,l as N,g as R,c as m,a as l,b as u,t,w as i,h as s,n as b,F as k,o as d,V as _,z as $,A as f,d as c,B as I,j as w,k as x,C as U,D as F,E as H,m as M,G as z,H as E}from"./GwSKdg7n.js";import{T as G}from"./BwuyUS3V.js";import{a as j}from"./EN5EgJKL.js";import{_ as W}from"./DlAUqK2U.js";const q={class:"header"},J={class:"filter-group"},K={for:"maPhong"},O={class:"filter-group"},Q={for:"loaiPhong"},X={class:"filter-group"},Y={for:"giaPhong"},Z={class:"filter-group"},ee={for:"tang"},ae={class:"filter-group"},le={for:"trangThai"},oe={class:"filter-actions"},te={key:0,class:"error-message"},ne={key:1,class:"services-grid"},se=["src"],re={class:"room-title"},ue={class:"room-price"},ie={class:"room-floor"},de={class:"room-bed-type"},ge={__name:"phong",setup(ce){const L=S(),T=D(),y=v([]),g=v([]),P=v(!0),V=v(null),o=v({maPhong:"",loaiPhong:"",giaPhong:"",tang:"",trangThai:""}),e=N(()=>(T.currentLanguage,T.t));R(async()=>{try{const r=await j.get("/PhongWithTienNghi");y.value=r.data,g.value=r.data}catch(r){V.value=r.message||"Lỗi khi gọi API",console.error("Lỗi khi gọi API:",r)}finally{P.value=!1}});const h=()=>{g.value=y.value.filter(r=>(o.value.maPhong?r.maPhong.includes(o.value.maPhong):!0)&&(o.value.loaiPhong?r.loaiPhong.includes(o.value.loaiPhong):!0)&&(o.value.giaPhong?r.giaPhong<=o.value.giaPhong:!0)&&(o.value.tang?r.tang==o.value.tang:!0)&&(o.value.trangThai?r.trangThai.includes(o.value.trangThai):!0))},C=r=>{g.value=g.value.sort((n,p)=>r==="asc"?n.giaPhong-p.giaPhong:p.giaPhong-n.giaPhong)},A=r=>{alert(`${e.value.addToCart}: ${r.loaiPhong}`)};return(r,n)=>{const p=B;return d(),m(k,null,[l("header",null,[u(G)]),l("div",{class:b(["container",{"dark-mode":s(L).isDarkMode}])},[l("h1",q,t(e.value.title),1),u(s(I),{outlined:"",class:"filter-form"},{default:i(()=>[l("div",J,[l("label",K,t(e.value.roomId)+":",1),u(s(_),{id:"maPhong",modelValue:o.value.maPhong,"onUpdate:modelValue":n[0]||(n[0]=a=>o.value.maPhong=a),placeholder:e.value.enterRoomId,outlined:"",onInput:h},null,8,["modelValue","placeholder"])]),l("div",O,[l("label",Q,t(e.value.roomType)+":",1),u(s(_),{id:"loaiPhong",modelValue:o.value.loaiPhong,"onUpdate:modelValue":n[1]||(n[1]=a=>o.value.loaiPhong=a),placeholder:e.value.enterRoomType,outlined:"",onInput:h},null,8,["modelValue","placeholder"])]),l("div",X,[l("label",Y,t(e.value.maxPrice)+":",1),u(s(_),{id:"giaPhong",modelValue:o.value.giaPhong,"onUpdate:modelValue":n[2]||(n[2]=a=>o.value.giaPhong=a),placeholder:e.value.enterMaxPrice,outlined:"",type:"number",onInput:h},null,8,["modelValue","placeholder"])]),l("div",Z,[l("label",ee,t(e.value.floor)+":",1),u(s(_),{id:"tang",modelValue:o.value.tang,"onUpdate:modelValue":n[3]||(n[3]=a=>o.value.tang=a),placeholder:e.value.enterFloor,outlined:"",type:"number",onInput:h},null,8,["modelValue","placeholder"])]),l("div",ae,[l("label",le,t(e.value.status)+":",1),u(s($),{id:"trangThai",modelValue:o.value.trangThai,"onUpdate:modelValue":n[4]||(n[4]=a=>o.value.trangThai=a),options:[{value:"",label:e.value.all},{value:"Còn trống",label:e.value.available},{value:"Đã đặt",label:e.value.booked}],outlined:"",onChange:h},null,8,["modelValue","options"])]),l("div",oe,[u(s(f),{color:"primary",onClick:n[5]||(n[5]=a=>C("asc"))},{default:i(()=>[c(t(e.value.sortAsc),1)]),_:1}),u(s(f),{color:"primary",onClick:n[6]||(n[6]=a=>C("desc"))},{default:i(()=>[c(t(e.value.sortDesc),1)]),_:1})])]),_:1}),u(s(E),{loading:P.value,color:"danger",type:"rectangle-bounce"},{default:i(()=>[V.value?(d(),m("div",te," Lỗi: "+t(V.value),1)):g.value.length?(d(),m("div",ne,[(d(!0),m(k,null,w(g.value,a=>(d(),x(s(I),{key:a.maPhong,class:"room-card",outlined:""},{default:i(()=>[l("img",{src:a.urlAnhChinh,alt:"Hình ảnh phòng",class:"room-image"},null,8,se),u(s(U),null,{default:i(()=>[l("div",re,t(a.loaiPhong),1)]),_:2},1024),u(s(F),null,{default:i(()=>[l("p",ue,[c(t(e.value.price)+": ",1),l("strong",null,t(a.giaPhong.toLocaleString())+" VND",1)]),l("p",ie,t(e.value.floor)+": "+t(a.tang),1),l("p",de,t(e.value.bedType)+": "+t(a.kieuGiuong),1),l("span",{class:b(["room-status",a.trangThai==="Còn trống"?"available":"booked"])},t(a.trangThai==="Còn trống"?e.value.available:e.value.booked),3)]),_:2},1024),u(s(H),null,{default:i(()=>[u(p,{to:`/phong/${a.maPhong}`,class:"view-details"},{default:i(()=>[u(s(f),{color:"primary"},{default:i(()=>[c(t(e.value.viewDetails),1)]),_:1})]),_:2},1032,["to"]),u(s(f),{color:"success",onClick:he=>A(a)},{default:i(()=>[c(t(e.value.addToCart),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(d(),m(k,{key:2},[P.value?M("",!0):(d(),x(s(z),{key:0,type:"info",class:"no-services"},{default:i(()=>[c(t(e.value.noRooms),1)]),_:1}))],64))]),_:1},8,["loading"])],2)],64)}}},Pe=W(ge,[["__scopeId","data-v-efe1fd0d"]]);export{Pe as default};
