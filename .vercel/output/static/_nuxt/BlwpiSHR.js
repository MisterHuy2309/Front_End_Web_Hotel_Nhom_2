import{c as i,o as n,F as v,r as P,a,m as l,t as c,q as x,d as y,i as m,j as T,k as M,l as u,b}from"./D8Oq5PXF.js";import{_ as k}from"./DlAUqK2U.js";import{T as B}from"./5R2-rVzW.js";import"./DOkrFvzk.js";import"./Bsxie3s2.js";const N={class:"services-grid"},C={class:"hotel-image-wrapper"},G=["src","alt"],q={key:0,class:"discount-badge"},V={class:"badge-stack"},j={key:0,class:"badge badge-green",title:"Best rating"},w={key:1,class:"badge badge-blue",title:"Most booked"},L={key:2,class:"badge badge-orange",title:"Highest price"},R={key:3,class:"badge badge-purple",title:"Lowest price"},S={class:"hotel-card-content"},$={class:"hotel-title"},H={class:"hotel-info-row"},A={class:"hotel-type"},F={class:"hotel-rating"},I={class:"hotel-booked"},O={class:"hotel-price-group"},D={key:0,class:"hotel-old-price"},E={class:"hotel-price"},z={class:"per-night"},J=["disabled"],K={__name:"CardRooms",props:{rooms:{type:Array,required:!0},maxRating:{type:Number,required:!0},maxBooked:{type:Number,required:!0},maxPrice:{type:Number,required:!0},minPrice:{type:Number,required:!0},bookedMap:{type:Object,required:!0}},setup(d){function r(s){var e;const t=(e=s.giamGia)==null?void 0:e[0];return t&&t.giaTriGiam>0&&s.giaPhong>0?Math.round(t.giaTriGiam/s.giaPhong*100):0}function h(s){var e;const t=(e=s.giamGia)==null?void 0:e[0];return t&&t.giaTriGiam>0?s.giaPhong-t.giaTriGiam:s.giaPhong}function g(s){return s?s.toLocaleString("vi-VN")+"₫":""}return(s,t)=>(n(),i("div",N,[(n(!0),i(v,null,P(d.rooms,e=>(n(),i("div",{key:e.maPhong,class:"hotel-card"},[a("div",C,[a("img",{class:"hotel-image",src:e.urlAnhChinh||"https://i.pinimg.com/736x/5c/f2/cd/5cf2cd74c675ddbd78c0defbce34a63d.jpg",alt:e.loaiPhong||"Phòng khách sạn"},null,8,G),r(e)>0?(n(),i("div",q," -"+c(r(e))+"% ",1)):l("",!0),a("div",V,[e.soSaoTrungBinh===d.maxRating?(n(),i("div",j,"Best")):l("",!0),d.bookedMap[e.maPhong]===d.maxBooked?(n(),i("div",w,"Hot")):l("",!0),e.giaPhong===d.maxPrice?(n(),i("div",L,"High")):l("",!0),e.giaPhong===d.minPrice?(n(),i("div",R,"Low")):l("",!0)])]),a("div",S,[a("h3",$,c(e.loaiPhong),1),a("div",H,[a("span",A,c(e.loaiPhong),1),a("span",{class:x(["hotel-status",e.tinhTrang==="2"?"status-booked":"status-available"])},c(e.tinhTrang==="2"?"Đã đặt":"Còn trống"),3)]),a("div",F,[t[0]||(t[0]=a("span",{class:"star"},"★",-1)),a("span",null,c(e.soSaoTrungBinh),1),a("span",I,"("+c(d.bookedMap[e.maPhong]||0)+" lượt đặt)",1)]),a("div",O,[r(e)>0?(n(),i("span",D,c(g(e.giaPhong)),1)):l("",!0),a("span",E,c(g(h(e))),1),a("span",z,"/ "+c(e.donViTinh||"đêm"),1)]),a("button",{class:"book-btn",disabled:e.tinhTrang==="2"},t[1]||(t[1]=[a("i",{class:"fa fa-bed"},null,-1),y(" Đặt phòng ")]),8,J)])]))),128))]))}},Q=k(K,[["__scopeId","data-v-81a40ab1"]]),U={class:"page-container"},W={key:0,class:"modal-loading"},X={key:1,class:"error-message"},Y={key:2},Z={__name:"phong",setup(d){const r=m([]),h=m(!0),g=m(null);T(async()=>{try{const o=await M.get("/TatCaTruyCap/phong");r.value=o.data}catch(o){g.value=o.message||"Lỗi khi gọi API"}finally{h.value=!1}});const s=u(()=>Math.max(...r.value.map(o=>o.soSaoTrungBinh||0))),t=u(()=>Math.max(...r.value.map(o=>o.giaPhong||0))),e=u(()=>Math.min(...r.value.map(o=>o.giaPhong||0))),p=u(()=>Object.fromEntries(r.value.map(o=>[o.maPhong,Math.floor(Math.random()*500)+1]))),f=u(()=>Math.max(...Object.values(p.value)));return(o,_)=>(n(),i(v,null,[b(B),a("div",U,[h.value?(n(),i("div",W,_[0]||(_[0]=[a("div",{class:"modal-loading-backdrop"},null,-1),a("div",{class:"modal-loading-content"},[a("span",{class:"loader"}),a("span",null,"Đang tải dữ liệu...")],-1)]))):l("",!0),g.value?(n(),i("div",X,c(g.value),1)):(n(),i("div",Y,[b(Q,{rooms:r.value,"max-rating":s.value,"max-booked":f.value,"max-price":t.value,"min-price":e.value,"booked-map":p.value},null,8,["rooms","max-rating","max-booked","max-price","min-price","booked-map"])]))])],64))}},ne=k(Z,[["__scopeId","data-v-1e3ffc0b"]]);export{ne as default};
