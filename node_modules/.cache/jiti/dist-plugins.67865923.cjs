"use strict";Object.defineProperty(exports, "__esModule", { value: true });Object.defineProperty(exports, "AliasSortingPlugin", { enumerable: true, get: function () {return _unheadDeCxexjU.A;} });exports.CanonicalPlugin = CanonicalPlugin;Object.defineProperty(exports, "DeprecationsPlugin", { enumerable: true, get: function () {return _unheadDeCxexjU.D;} });Object.defineProperty(exports, "FlatMetaPlugin", { enumerable: true, get: function () {return _unheadCApf5sj.F;} });exports.InferSeoMetaPlugin = InferSeoMetaPlugin;Object.defineProperty(exports, "PromisesPlugin", { enumerable: true, get: function () {return _unheadDeCxexjU.P;} });Object.defineProperty(exports, "SafeInputPlugin", { enumerable: true, get: function () {return _unheadCApf5sj.S;} });Object.defineProperty(exports, "TemplateParamsPlugin", { enumerable: true, get: function () {return _unheadDeCxexjU.T;} });Object.defineProperty(exports, "defineHeadPlugin", { enumerable: true, get: function () {return _unheadCApf5sj.d;} });var _unheadDeCxexjU = require("./shared/unhead.DeCxexjU.mjs");
var _unheadCApf5sj = require("./shared/unhead.CApf5sj3.mjs");

require("./shared/unhead.DZbvapt-.mjs");
require("./shared/unhead.C13swrCa.mjs");
require("./shared/unhead.DQc16pHI.mjs");
require("./shared/unhead.yem5I2v_.mjs");

function CanonicalPlugin(options) {
  return (head) => {
    function resolvePath(path) {
      if (options?.customResolver) {
        return options.customResolver(path);
      }
      let host = options.canonicalHost || (!head.ssr ? window.location.origin : "");
      if (!host.startsWith("http") && !host.startsWith("//")) {
        host = `https://${host}`;
      }
      host = new URL(host).origin;
      if (path.startsWith("http") || path.startsWith("//"))
      return path;
      try {
        return new URL(path, host).toString();
      } catch {
        return path;
      }
    }
    return {
      key: "canonical",
      hooks: {
        "tags:resolve": (ctx) => {
          for (const tag of ctx.tags) {
            if (tag.tag === "meta") {
              if (tag.props.property?.startsWith("og:image") || tag.props.name?.startsWith("twitter:image")) {
                tag.props.content = resolvePath(tag.props.content);
              } else if (tag.props?.property === "og:url") {
                tag.props.content = resolvePath(tag.props.content);
              }
            } else if (tag.tag === "link" && tag.props.rel === "canonical") {
              tag.props.href = resolvePath(tag.props.href);
            }
          }
        }
      }
    };
  };
}

function InferSeoMetaPlugin(options = {}) {
  return (0, _unheadCApf5sj.d)((head) => {
    head.push({
      meta: [
      {
        name: "twitter:card",
        content: options.twitterCard || "summary_large_image",
        tagPriority: "low"
      },
      {
        "property": "og:title",
        "tagPriority": "low",
        "data-infer": ""
      },
      {
        "property": "og:description",
        "tagPriority": "low",
        "data-infer": ""
      }]

    });
    return {
      key: "infer-seo-meta",
      hooks: {
        "tags:beforeResolve": ({ tagMap }) => {
          let title = head._titleTemplate || head._title;
          const ogTitle = tagMap.get("meta:og:title");
          if (typeof ogTitle?.props["data-infer"] !== "undefined") {
            if (typeof title === "function") {
              title = title(head._title);
            }
            ogTitle.props.content = options.ogTitle ? options.ogTitle(title) : title || "";
            ogTitle.processTemplateParams = true;
          }
          const description = tagMap.get("meta:description")?.props?.content;
          const ogDescription = tagMap.get("meta:og:description");
          if (typeof ogDescription?.props["data-infer"] !== "undefined") {
            ogDescription.props.content = options.ogDescription ? options.ogDescription(description) : description || "";
            ogDescription.processTemplateParams = true;
          }
        }
      }
    };
  });
} /* v9-fe521fa025f09794 */
